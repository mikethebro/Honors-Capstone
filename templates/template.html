<html>
<head>
	<title>Capstone</title>
	<link rel="stylesheet" type="text/css" href="{{ static_url("main.css") }}">
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
	<h1>Honors Capstone</h1>
	<h3>Mike Ward</h3>
  <!-- full form -->
	<form method="post">
    <!-- section shared by all algorithms -->
    <div class="all">
      <label for="mva_days">MVA</label>
      <input type="text" value="{{ mva_days }}" name="mva_days"/>
        days
      <br/>
      <label for="cash">Starting Cash</label>
      <input type="text" value="{{ cash }}" name="cash"/>
      <br/>
      <input type="radio" name="currency" id="btc" value="BTC" {{ btc_checked }}>
      <label for="btc">Bitcoin</label>
      <br>
      <input type="radio" name="currency" id="eth" value="ETH" {{ eth_checked }}>
      <label for="eth">Ethereum</label>
      <br>
      <input type="radio" name="currency" id="ltc" value="LTC" {{ ltc_checked }}>
      <label for="ltc">Litecoin</label>
      <br>
      <input type="radio" name="currency" id="bch" value="BCH" {{ bch_checked }}>
      <label for="ltc">Bitcoin Cash</label>
      <br>
      <input type="radio" name="currency" id="xrp" value="XRP" {{ xrp_checked }}>
      <label for="ltc">Ripple</label>
    </div>

    <!-- section for simple moving average crossover -->
    <div class="mva-simple">
      <h2 class="center">Simple Moving Average Crossover</h2>
        <input type="submit" name="run_mva" value="Run MVA"/>
    </div>

    <!-- section for exponential moving average crossover -->
    <div class="mva-exponential">
      <h2 class="center">Expoential Moving Average Crossover</h2>
      <p class="center">Not implemented yet</p>
    </div>

    <!-- section for mean reversion -->
    <div class="mean-reversion">
      <h2 class="center">Mean Reversion</h2>
      <p class="center">Not implemented yet</p>
    </div>

    <!-- section for pairs trading -->
    <div class="pairs-trading">
      <h2 class="center">Pairs Trading</h2>
      <input type="radio" name="currency2" id="btc" value="BTC" {{ btc2_checked }}>
      <label for="btc">Bitcoin</label>
      <br>
      <input type="radio" name="currency2" id="eth" value="ETH" {{ eth2_checked }}>
      <label for="eth">Ethereum</label>
      <br>
      <input type="radio" name="currency2" id="ltc" value="LTC" {{ ltc2_checked }}>
      <label for="ltc">Litecoin</label>
      <br>
      <input type="radio" name="currency2" id="bch" value="BCH" {{ bch2_checked }}>
      <label for="ltc">Bitcoin Cash</label>
      <br>
      <input type="radio" name="currency2" id="xrp" value="XRP" {{ xrp2_checked }}>
      <label for="ltc">Ripple</label>
      <br>
      <input type="submit" name="run_pairs" value="Run Pairs"/>
    </div>

  </form>
	<p>{{ text }}</p>

  <!-- mva graph -->
  <div class="chart-mva" style="display: {{mva_display}};">
	   <h2 class="chart-mva" style="text-align: center;">Price and Moving Average</h2>
     <div id="chart-mva" style="height: 50%;"></div>
  </div>

  <!-- algo vs. holding graph (2 lines) -->
  <div class="chart-hold/algo-2" style="display: {{mva_display}};">
    <h2 class="chart-hold/algo-2" style="text-align: center;">Algorithm vs. Holding</h2>
    <div id="chart-hold/algo-2" style="height: 50%;display: {{mva_display}}"></div>
  </div>

  <!-- algo vs. holding graph (3 lines) -->
  <div class="chart-hold/algo-3" style="display: {{pairs_display}};">
    <h2 class="chart-hold/algo-3" style="text-align: center;">Pairs Trading: Algorithm vs. Holding</h2>
    <div id="chart-hold/algo-3" style="height: 50%;display: {{pairs_display}}"></div>
  </div>


  <script>
      //-------------------------------------------------
      // chart-mva: graphs price and moving average
      //-------------------------------------------------

      // line for the price of the currency
      var price_line = {
      	x: {{ price_data_x }},
      	y: {{ price_data_y }},
      	type: 'scatter',
		    name: 'price'
      };
      // line for the moving average
      var mva_line = {
      	x: {{ mva_data_x }},
      	y: {{ mva_data_y }},
      	type: 'scatter',
		    name: 'moving average'
      };
      // data for the mva graph
      var data = [price_line, mva_line];
      var layout = {
      xaxis: {
        range: [0, 5]
      },
      yaxis: {
        range: [0, 20]
        }
      };
      Plotly.newPlot('chart-mva', data); //plot the graph
      //-------------------------------------------------
      // chart-hold/algo-2: graphs price for holding
      // and value of the algorithm over time
      //-------------------------------------------------

      var hold_higher_line = {
        x: {{ price_data_x }},
        y: {{ hold_higher_data_y }},
        type: 'scatter',
        name: 'Holding Currency'
      };

      // line for the holdings of the algorithm
      var algo_line = {
        x: {{ price_data_x }},
        y: {{ algo_data_y }},
        type: 'scatter',
        name: 'algorithm'
      };
      // data for the hold/algo graph
      var data = [hold_higher_line, algo_line];
      var layout = {
      xaxis: {
        range: [0, 5]
      },
      yaxis: {
        range: [0, 20]
        }
      };
      Plotly.newPlot('chart-hold/algo-2', data); //plot the graph

      //-------------------------------------------------
      // chart-hold/algo-3: graphs price of both
      // currences and value of the algorithm over time
      //-------------------------------------------------

      // line for the second price of the currency
      var hold_lower_line = {
        x: {{ price_data_x }},
        y: {{ hold_lower_data_y }},
        type: 'scatter',
        name: 'Holding Currency'
      };
      // line for the holdings of the algorithm
      var algo_line = {
        x: {{ price_data_x }},
        y: {{ algo_data_y }},
        type: 'scatter',
        name: 'Algorithm'
      };
      // data for the hold/hold/algo graph
      var data = [hold_higher_line, hold_lower_line, algo_line];
      var layout = {
      xaxis: {
        range: [0, 5]
      },
      yaxis: {
        range: [0, 20]
        }
      };
      Plotly.newPlot('chart-hold/algo-3', data); //plot the graph
      </script>
</html>